<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CureChain · NGO Dashboard (Simple)</title>
  <style>
    :root{ --primary:#8bd7f0; --ink:#1f2937; --border:#e5e7eb; --soft:#f7fcff; --radius:14px; }
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--ink);background:#fff}
    .wrap{max-width:980px;margin:0 auto;padding:16px}

    /* Header */
    .banner{background:var(--primary); color:#064255; padding:10px 14px; border-radius:12px;}
    .banner h1{margin:0;font-size:20px}
    .sub{font-size:13px; opacity:.9}

    /* Info strip */
    .strip{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:12px 0}
    .box{background:var(--soft);border:1px solid var(--border);border-radius:12px;padding:10px 12px}
    .box .t{font-size:12px;opacity:.8}
    .box .v{font-weight:700;font-size:18px;margin-top:4px}

    /* Tabs */
    .tabs{display:flex;gap:6px;flex-wrap:wrap;margin:8px 0 12px}
    .tab{border:1px solid var(--border);background:#fff;border-radius:999px;padding:7px 12px;font-size:14px;cursor:pointer}
    .tab.active{background:var(--primary);border-color:var(--primary)}

    /* Cards */
    .card{border:1px solid var(--border);border-radius:var(--radius);padding:12px;margin-bottom:8px;background:#fff}
    .row{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .meta{font-size:13px;opacity:.85}

    /* Buttons (no black, only primary) */
    .btn{margin:4px; border:1px solid var(--primary);background:#fff;color:#05516a;padding:8px 12px;border-radius:10px;cursor:pointer}
    .btn.primary{background:var(--primary);color:#064255}

    /* Stock table */
    .table{border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .thead,.trow{display:grid;grid-template-columns:2fr 1fr 2fr;gap:8px}
    .thead{background:#f9fdff;font-size:12px;padding:8px 10px;border-bottom:1px solid var(--border)}
    .trow{padding:8px 10px;border-bottom:1px solid var(--border)}
    .trow:last-child{border-bottom:none}

    @media (max-width:720px){ .strip{grid-template-columns:repeat(2,1fr)} .thead,.trow{grid-template-columns:1.5fr .7fr 1.3fr} }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Simple header -->
    <div class="banner" style="background-color: #e5e7eb;">
      <h1><span style="color: #00BFFF; font-weight: 600;">CureChain </span> · NGO Dashboard</h1>
      
    <p>Medicine Donation & Request Portal</p>
      
    </div>

    <!-- Donation info strip (always visible) -->
    <div class="strip" id="strip">
      <div class="box"><div class="t">New Requests</div><div class="v" id="sNew">0</div></div>
      <div class="box"><div class="t">Approved</div><div class="v" id="sApp">0</div></div>
      <div class="box"><div class="t">Completed</div><div class="v" id="sCom">0</div></div>
      <div class="box"><div class="t">Stock Items</div><div class="v" id="sSku">0</div></div>
    </div>

    <!-- Simple tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="requests">New Donation Requests</button>
      <button class="tab" data-tab="approved">Approved</button>
      <button class="tab" data-tab="completed">Completed</button>
      <button class="tab" data-tab="stock">Available Stock</button>
    </div>

    <!-- Content area -->
    <div id="view"></div>
  </div>

<script>
  // Minimal JS – just enough to move cards and update counts
  const state = {
    active:'requests',
    pending:[
      {id:'D-101', med:'Paracetamol 500mg', qty:12, exp:'2026-01-15', donor:'Rahul Verma', addr:'Rohini Sec-12'},
      {id:'D-102', med:'ORS Pack', qty:30, exp:'2025-08-30', donor:'Neha Singh', addr:'Dwarka Sec-7'},
      {id:'D-103', med:'Amoxicillin 250mg', qty:8,  exp:'2026-09-01', donor:'Imran Khan', addr:'Janakpuri C3'},
    ],
    approved:[],
    completed:[],
    stock:{ 'Paracetamol 500mg':{total:50,batches:[{exp:'2026-01-01',qty:50}]}, 'ORS Pack':{total:20,batches:[{exp:'2025-07-15',qty:20}]}}
  };

  const $ = s=>document.querySelector(s);
  const $$ = s=>[...document.querySelectorAll(s)];

  function setCounts(){
    $('#sNew').textContent = state.pending.length;
    $('#sApp').textContent = state.approved.length;
    $('#sCom').textContent = state.completed.length;
    $('#sSku').textContent = Object.keys(state.stock).length;
  }

  function render(){
    setCounts();
    $$('.tab').forEach(b=>b.classList.toggle('active', b.dataset.tab===state.active));
    if(state.active==='requests') renderRequests();
    else if(state.active==='approved') renderApproved();
    else if(state.active==='completed') renderCompleted();
    else renderStock();
  }

  function card(d){
    return `<div class="card">
      <div class="row">
        <div>
          <div><strong>${d.med}</strong> · <span class="meta">× ${d.qty}</span></div>
          <div class="meta">Expiry: ${d.exp}</div>
          <div class="meta">Donor: ${d.donor} · ${d.addr}</div>
        </div>
        <div class="meta">#${d.id}</div>
      </div>
    </div>`;
  }

  function renderRequests(){
    const v = $('#view');
    v.innerHTML = state.pending.map(d=> card(d) +
      `<div class="card" style="margin-top:-6px; border-top:0; border-top-left-radius:0; border-top-right-radius:0">
         <button class="btn primary" data-act="approve" data-id="${d.id}">Approve</button>
         <button class="btn" data-act="reject" data-id="${d.id}">Reject</button>
       </div>`
    ).join('') || `<div class="card">No new donation requests.</div>`;

    $$('[data-act]').forEach(b=> b.onclick=()=>{
      const id = b.dataset.id;
      const idx = state.pending.findIndex(x=>x.id===id);
      if(idx<0) return;
      const item = state.pending[idx];
      if(b.dataset.act==='approve'){ state.approved.unshift(item); }
      state.pending.splice(idx,1);
      render();
    });
  }

  function renderApproved(){
    const v = $('#view');
    v.innerHTML = state.approved.map(d=> card(d) +
      `<div class="card" style="margin-top:-6px; border-top:0; border-top-left-radius:0; border-top-right-radius:0">
         <button class="btn primary" data-act="picked" data-id="${d.id}">Mark as Picked Up</button>
         <button class="btn" data-act="dropped" data-id="${d.id}">Mark as Dropped</button>
       </div>`
    ).join('') || `<div class="card">No approved donations.</div>`;

    $$('[data-act]').forEach(b=> b.onclick=()=>{
      const id = b.dataset.id;
      const idx = state.approved.findIndex(x=>x.id===id);
      if(idx<0) return;
      const item = state.approved[idx];
      if(b.dataset.act==='picked' || b.dataset.act==='dropped'){
        addToStock(item);
        state.completed.unshift(item);
        state.approved.splice(idx,1);
      }
      render();
    });
  }

  function renderCompleted(){
    const v = $('#view');
    v.innerHTML = state.completed.map(d=> card(d)).join('') || `<div class="card">No completed donations.</div>`;
  }

  function addToStock(d){
    if(!state.stock[d.med]) state.stock[d.med] = {total:0,batches:[]};
    state.stock[d.med].total += d.qty;
    const b = state.stock[d.med].batches;
    const k = b.findIndex(x=>x.exp===d.exp);
    if(k>=0) b[k].qty += d.qty; else b.push({exp:d.exp, qty:d.qty});
  }

  function renderStock(){
    const v = $('#view');
    const rows = Object.entries(state.stock).map(([name, s])=>
      `<div class="trow"><div><strong>${name}</strong></div><div>${s.total}</div><div>${s.batches.map(b=>`${b.exp} · ${b.qty}`).join(' | ')}</div></div>`
    ).join('');
    v.innerHTML = `<div class="table">
      <div class="thead"><div>Medicine</div><div>Total</div><div>Batches</div></div>
      ${rows || `<div class="trow"><div colspan="3">No stock.</div></div>`}
    </div>`;
  }

  // Tab events
  $$('.tab').forEach(b=> b.onclick=()=>{ state.active=b.dataset.tab; render(); });

  // First render
  render();
</script>
</body>
</html>
